{% extends "base.html" %}

{% block title %}Alterar Senha{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-6">
    <h3 class="mb-4">Alterar Senha</h3>
    <form method="POST" onsubmit="return validarSenhas()">
      <div class="mb-3">
        <label for="senha_atual" class="form-label">Senha Atual</label>
        <input type="password" class="form-control" id="senha_atual" name="senha_atual" required>
      </div>
      <div class="mb-3">
        <label for="nova_senha" class="form-label">Nova Senha</label>
        <input type="password" class="form-control" id="nova_senha" name="nova_senha"
               pattern="(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}"
               title="A senha deve ter ao menos 8 caracteres, incluindo letras e números." required>
      </div>
      <div class="mb-3">
        <label for="confirmar_senha" class="form-label">Confirmar Nova Senha</label>
        <input type="password" class="form-control" id="confirmar_senha" name="confirmar_senha"
               pattern="(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}"
               title="A senha deve ter ao menos 8 caracteres, incluindo letras e números." required>
      </div>
      <div class="d-flex justify-content-between">
        <button type="submit" class="btn btn-primary">Salvar</button>
        <a href="/home" class="btn btn-secondary">Cancelar</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  function validarSenhas() {
    const nova = document.getElementById('nova_senha').value;
    const confirmar = document.getElementById('confirmar_senha').value;
    if (nova !== confirmar) {
      alert('As senhas não coincidem.');
      return false;
    }
    return true;
  }
</script>
{% endblock %}
